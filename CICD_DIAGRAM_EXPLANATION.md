# CI/CD Design Diagram - Book Store Application Deployment

## Diagram Overview

This diagram represents a complete DevOps pipeline for deploying a MERN Stack Book Store Application across development, staging, and production environments using modern Infrastructure as Code (IaC) and container orchestration practices.

---

## Architecture Components & Flow

### **PART 1: SOURCE CONTROL LAYER (Git)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DEVELOPER WORKSTATION                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  - Write Code (Frontend/Backend)           â”‚ â”‚
â”‚  â”‚  - Commit Changes                          â”‚ â”‚
â”‚  â”‚  - Push to Git Repository                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ Commit/Push Code
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  GitHub Repository  â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚ main (Prod)     â”‚â”‚
        â”‚  â”‚ develop (Stage) â”‚â”‚
        â”‚  â”‚ feature/* (Dev) â”‚â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ Webhook Trigger
                     â–¼
```

**Key Components:**

- **Source Code Repositories:** Branches for main (production), develop (staging), feature (development)
- **Version Control:** Git with branch protection rules
- **Webhooks:** Automatic trigger to Jenkins on code push

---

### **PART 2: CI/CD ORCHESTRATION LAYER (Jenkins)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JENKINS CI/CD SERVER                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Environment Variables:                                 â”‚  â”‚
â”‚  â”‚ â€¢ FRONTEND_IMAGE = lahiru2002/frontend-app            â”‚  â”‚
â”‚  â”‚ â€¢ BACKEND_IMAGE = lahiru2002/backend-app             â”‚  â”‚
â”‚  â”‚ â€¢ MONGODB_IMAGE = mongo:latest                        â”‚  â”‚
â”‚  â”‚ â€¢ GIT_REPO = https://github.com/Lahiru-code/...      â”‚  â”‚
â”‚  â”‚ â€¢ NODE_ENV = production                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  PIPELINE STAGES:                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 1: Clone Repository                              â”‚ â”‚
â”‚  â”‚ â””â”€ git clone from GitHub (main/develop)                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 2: Code Quality Analysis                          â”‚ â”‚
â”‚  â”‚ â”œâ”€ ESLint (Frontend)                                   â”‚ â”‚
â”‚  â”‚ â”œâ”€ SonarQube (Code scanning)                           â”‚ â”‚
â”‚  â”‚ â””â”€ Generate reports                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 3: Build & Unit Tests                            â”‚ â”‚
â”‚  â”‚ â”œâ”€ Frontend: npm install â†’ npm run build (Vite)        â”‚ â”‚
â”‚  â”‚ â”œâ”€ Backend: npm install â†’ npm test                    â”‚ â”‚
â”‚  â”‚ â””â”€ Generate artifacts                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 4: Containerization (Docker Build)               â”‚ â”‚
â”‚  â”‚ â”œâ”€ Build Frontend Image:                               â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ frontend/Dockerfile â†’ Node:18-alpine + Nginx    â”‚ â”‚
â”‚  â”‚ â”œâ”€ Build Backend Image:                                â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ backend/Dockerfile â†’ Node:18-alpine             â”‚ â”‚
â”‚  â”‚ â””â”€ Security Scan (Trivy):                              â”‚ â”‚
â”‚  â”‚    â””â”€ Detect vulnerabilities in images                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 5: Push to Docker Registry                       â”‚ â”‚
â”‚  â”‚ â”œâ”€ Login to Docker Hub                                â”‚ â”‚
â”‚  â”‚ â”œâ”€ Push Frontend Image: lahiru2002/frontend-app        â”‚ â”‚
â”‚  â”‚ â”œâ”€ Push Backend Image: lahiru2002/backend-app         â”‚ â”‚
â”‚  â”‚ â””â”€ Docker Logout                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 6: Infrastructure Provisioning (Terraform)       â”‚ â”‚
â”‚  â”‚ â”œâ”€ Validate .tf files                                  â”‚ â”‚
â”‚  â”‚ â”œâ”€ Plan infrastructure                                 â”‚ â”‚
â”‚  â”‚ â””â”€ Apply configuration:                                â”‚ â”‚
â”‚  â”‚    â”œâ”€ Create Kubernetes Cluster (GKE/EKS/AKS)        â”‚ â”‚
â”‚  â”‚    â”œâ”€ VPC & Networking                                â”‚ â”‚
â”‚  â”‚    â”œâ”€ Load Balancers                                  â”‚ â”‚
â”‚  â”‚    â”œâ”€ Persistent Storage (PVs)                        â”‚ â”‚
â”‚  â”‚    â””â”€ Security Groups                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 7: Configuration Management (Ansible)            â”‚ â”‚
â”‚  â”‚ â”œâ”€ Inventory: Host groups (prod/staging/dev)           â”‚ â”‚
â”‚  â”‚ â”œâ”€ Playbooks:                                          â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Install Docker runtime                          â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Configure networking                            â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Deploy security patches                         â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Mount storage volumes                           â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ Setup monitoring agents                         â”‚ â”‚
â”‚  â”‚ â””â”€ Run on target servers                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 8: Kubernetes Deployment (kubectl)               â”‚ â”‚
â”‚  â”‚ â”œâ”€ Create/Update ConfigMaps                            â”‚ â”‚
â”‚  â”‚ â”œâ”€ Apply Secrets                                       â”‚ â”‚
â”‚  â”‚ â”œâ”€ Deploy Services:                                    â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Frontend Deployment (replicas: 2-5)            â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Backend Deployment (replicas: 2-5)             â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ MongoDB StatefulSet (replicas: 1)              â”‚ â”‚
â”‚  â”‚ â”œâ”€ Configure Ingress & Load Balancing                 â”‚ â”‚
â”‚  â”‚ â”œâ”€ Setup Health Checks (Liveness & Readiness)         â”‚ â”‚
â”‚  â”‚ â””â”€ Enable Auto-scaling (HPA)                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stage 9: Testing & Validation                          â”‚ â”‚
â”‚  â”‚ â”œâ”€ Health Checks:                                      â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Frontend: HTTP GET / â†’ 200 OK                   â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Backend: HTTP GET /api/health â†’ 200 OK          â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ Database: MongoDB connectivity test             â”‚ â”‚
â”‚  â”‚ â”œâ”€ API Integration Tests                               â”‚ â”‚
â”‚  â”‚ â”œâ”€ Smoke Tests                                         â”‚ â”‚
â”‚  â”‚ â””â”€ Generate test reports                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Post Actions:                                          â”‚ â”‚
â”‚  â”‚ â”œâ”€ Docker Logout                                       â”‚ â”‚
â”‚  â”‚ â”œâ”€ Cleanup workspace                                   â”‚ â”‚
â”‚  â”‚ â””â”€ Notifications:                                      â”‚ â”‚
â”‚  â”‚    â”œâ”€ Slack message                                   â”‚ â”‚
â”‚  â”‚    â”œâ”€ Email notification                              â”‚ â”‚
â”‚  â”‚    â””â”€ Update dashboard                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Features:**

- Automated pipeline triggered by git webhooks
- Multi-stage build, test, and deployment process
- Security scanning at containerization stage
- Environment-specific configurations
- Comprehensive post-deployment validation

---

### **PART 3: INFRASTRUCTURE AS CODE LAYER**

#### **Terraform (Infrastructure Provisioning)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TERRAFORM MODULES                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚  1. VPC & Networking                       â”‚
â”‚     â”œâ”€ Virtual Private Cloud               â”‚
â”‚     â”œâ”€ Public & Private Subnets           â”‚
â”‚     â””â”€ Internet Gateway & NAT              â”‚
â”‚                                            â”‚
â”‚  2. Kubernetes Cluster                     â”‚
â”‚     â”œâ”€ GKE/EKS/AKS Setup                   â”‚
â”‚     â”œâ”€ Node Pools Configuration            â”‚
â”‚     â””â”€ RBAC & Service Accounts             â”‚
â”‚                                            â”‚
â”‚  3. Storage                                â”‚
â”‚     â”œâ”€ Persistent Volumes (SSD)            â”‚
â”‚     â”œâ”€ Cloud Storage (for backups)        â”‚
â”‚     â””â”€ Database persistence config         â”‚
â”‚                                            â”‚
â”‚  4. Load Balancers & Ingress               â”‚
â”‚     â”œâ”€ Network Load Balancer               â”‚
â”‚     â”œâ”€ Cloud Load Balancer                 â”‚
â”‚     â””â”€ Ingress Controller Setup            â”‚
â”‚                                            â”‚
â”‚  5. Security & Monitoring                  â”‚
â”‚     â”œâ”€ Security Groups                     â”‚
â”‚     â”œâ”€ Network Policies                    â”‚
â”‚     â””â”€ CloudWatch/Stackdriver              â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **Ansible (Configuration Management)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ANSIBLE PLAYBOOKS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚  Inventory: Development, Staging, Prod    â”‚
â”‚                                            â”‚
â”‚  Playbooks:                                â”‚
â”‚  â”œâ”€ docker-setup.yml                       â”‚
â”‚  â”‚  â””â”€ Install Docker, Docker Compose    â”‚
â”‚  â”‚                                        â”‚
â”‚  â”œâ”€ network-config.yml                     â”‚
â”‚  â”‚  â””â”€ Configure networking, DNS         â”‚
â”‚  â”‚                                        â”‚
â”‚  â”œâ”€ security-hardening.yml                â”‚
â”‚  â”‚  â”œâ”€ Firewall rules                    â”‚
â”‚  â”‚  â”œâ”€ SSH key management                â”‚
â”‚  â”‚  â””â”€ Security patches                  â”‚
â”‚  â”‚                                        â”‚
â”‚  â”œâ”€ storage-setup.yml                      â”‚
â”‚  â”‚  â””â”€ Mount volumes, permissions        â”‚
â”‚  â”‚                                        â”‚
â”‚  â””â”€ monitoring-setup.yml                   â”‚
â”‚     â”œâ”€ Prometheus agent                   â”‚
â”‚     â””â”€ Log collector setup                â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **PART 4: CONTAINER REGISTRY**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DOCKER HUB (Container Registry)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  lahiru2002/frontend-app                         â”‚
â”‚  â”œâ”€ Tags: latest, v1.0.0, ${BUILD_NUMBER}      â”‚
â”‚  â”œâ”€ Size: ~100MB (Nginx-based)                  â”‚
â”‚  â””â”€ Availability: Public/Private                â”‚
â”‚                                                  â”‚
â”‚  lahiru2002/backend-app                          â”‚
â”‚  â”œâ”€ Tags: latest, v1.0.0, ${BUILD_NUMBER}      â”‚
â”‚  â”œâ”€ Size: ~300MB (Node.js-based)                â”‚
â”‚  â””â”€ Availability: Public/Private                â”‚
â”‚                                                  â”‚
â”‚  mongo (Official)                                â”‚
â”‚  â”œâ”€ Tags: latest, 6.0.x                         â”‚
â”‚  â””â”€ Official MongoDB image                      â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **PART 5: DEPLOYMENT ENVIRONMENTS**

#### **PRODUCTION ENVIRONMENT (Kubernetes Cluster)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  KUBERNETES CLUSTER (GKE/EKS/AKS)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ NAMESPACE: production                                        â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ FRONTEND DEPLOYMENT (Nginx)                            â”‚ â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Image: lahiru2002/frontend-app:latest               â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Port: 80 (HTTP)                                     â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Replicas: 2-5 (Auto-scaling: HPA)                  â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Resources:                                          â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - CPU: 100m request, 500m limit                    â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Memory: 128Mi request, 256Mi limit               â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Health Check:                                       â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Readiness: GET / (200 OK)                        â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Liveness: GET /health                            â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Service: LoadBalancer (External IP)                â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Ingress: frontend.domain.com                       â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Environment (ConfigMap):                           â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - NODE_ENV=production                              â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - VITE_API_URL=https://api.domain.com              â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                         â†• (Service-to-Service)               â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ BACKEND DEPLOYMENT (Node.js/Express)                  â”‚ â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Image: lahiru2002/backend-app:latest               â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Port: 5000 (API)                                   â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Replicas: 2-5 (Auto-scaling: HPA)                 â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Resources:                                         â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - CPU: 200m request, 1000m limit                  â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Memory: 256Mi request, 512Mi limit              â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Health Check:                                      â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Readiness: GET /api/health                       â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Liveness: GET /health (with timeout)             â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Service: ClusterIP (Internal only)                â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Environment (ConfigMap):                          â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - NODE_ENV=production                             â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - PORT=5000                                        â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - DB_URL=mongodb://mongodb-service:27017/bookstoreâ”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Secrets:                                           â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - JWT_SECRET (base64 encoded)                     â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - MONGO_USER, MONGO_PASSWORD                      â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Volume Mounts: (for logs & temp storage)           â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                         â†• (Database Connection)              â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ MONGODB STATEFULSET                                   â”‚ â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Image: mongo:latest                                â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Port: 27017                                        â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Replicas: 1 (Primary + optional replicas)         â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Persistent Volume Claim:                          â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Storage: 10Gi (production: 50Gi+)               â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Storage Class: fast-ssd                         â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Mount Path: /data/db                            â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Service: mongodb-service (Headless ClusterIP)     â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Secrets:                                          â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - MONGO_INITDB_ROOT_USERNAME                      â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - MONGO_INITDB_ROOT_PASSWORD                      â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Backup Strategy:                                  â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Daily snapshots to Cloud Storage                â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Point-in-time recovery enabled                 â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ INGRESS CONTROLLER (Nginx/Cloud LB)                   â”‚ â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Type: Nginx Ingress / Cloud Load Balancer          â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Routes:                                            â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - domain.com â†’ Frontend Service (port 80)         â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - api.domain.com â†’ Backend Service (port 5000)    â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - admin.domain.com â†’ Admin Dashboard              â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ TLS/SSL:                                           â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Certificates: Let's Encrypt (cert-manager)      â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Auto-renewal enabled                            â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Security:                                          â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Rate limiting                                   â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - WAF rules (optional)                            â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - CORS policies                                   â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ NETWORK POLICIES                                       â”‚ â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Frontend â†” Ingress: ALLOW (HTTP/HTTPS)            â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Frontend â†” Backend: ALLOW (Internal)              â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Backend â†” MongoDB: ALLOW (Internal)               â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ All â†’ DNS: ALLOW (port 53)                        â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ External â†’ MongoDB: DENY (isolated)               â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Egress: Allow Docker Hub, GitHub                  â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ MONITORING & LOGGING                                   â”‚ â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Prometheus: Metrics collection                     â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Grafana: Dashboards & visualization                â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Loki/ELK: Log aggregation                          â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Alertmanager: Alert notifications                 â”‚ â”‚â”‚
â”‚  â”‚ â”‚ â€¢ Custom Dashboards:                                â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Pod health & resource usage                    â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - API response times                             â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Database performance metrics                   â”‚ â”‚â”‚
â”‚  â”‚ â”‚   - Error rates & logs                             â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **STAGING ENVIRONMENT (Alternative Deployment)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAGING (Docker Compose on VM)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  VM Instance (Linux)                         â”‚
â”‚  â”œâ”€ Docker Runtime                           â”‚
â”‚  â”œâ”€ docker-compose.yml                       â”‚
â”‚  â””â”€ Services:                                â”‚
â”‚     â”œâ”€ Frontend (port 80)                   â”‚
â”‚     â”œâ”€ Backend (port 5000)                  â”‚
â”‚     â””â”€ MongoDB (port 27017)                 â”‚
â”‚                                              â”‚
â”‚  Single Load Balancer (HAProxy/Nginx)        â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **PART 6: NETWORKING & CONNECTIVITY**

#### **Infrastructure Level**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLOUD PROVIDER (GCP/AWS/Azure)       â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ VPC (Virtual Private Cloud)                    â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ Public Subnets                            â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ â”œâ”€ Internet Gateway (IGW)                â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ â””â”€ Load Balancer (public facing)          â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚              â†•                                   â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ Private Subnets (Kubernetes Cluster)      â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ â”œâ”€ Master Nodes                           â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ â”œâ”€ Worker Nodes                           â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ â””â”€ NAT Gateway (for egress)               â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                 â”‚  â”‚
â”‚  â”‚ Security Groups:                                â”‚  â”‚
â”‚  â”‚ â”œâ”€ Ingress: HTTP(80), HTTPS(443), SSH(22)    â”‚  â”‚
â”‚  â”‚ â”œâ”€ Egress: All protocols (to external)       â”‚  â”‚
â”‚  â”‚ â””â”€ Pod-to-Pod: Allow via Network Policies    â”‚  â”‚
â”‚  â”‚                                                 â”‚  â”‚
â”‚  â”‚ DNS Configuration:                              â”‚  â”‚
â”‚  â”‚ â”œâ”€ A Records: domain.com â†’ Load Balancer IP â”‚  â”‚
â”‚  â”‚ â”œâ”€ CNAME: api.domain.com â†’ domain.com       â”‚  â”‚
â”‚  â”‚ â””â”€ CNAME: admin.domain.com â†’ domain.com     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **Application Level (Container-to-Container Communication)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           APPLICATION COMPONENT CONNECTIVITY                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  USERS/INTERNET                                             â”‚
â”‚        â†“ (HTTPS/HTTP)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ LOAD BALANCER / INGRESS CONTROLLER                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        â†“ (Port 80/443)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         FRONTEND PODS (Nginx)                       â”‚  â”‚
â”‚  â”‚  Serving: HTML, CSS, JS, Assets                    â”‚  â”‚
â”‚  â”‚  Listening on: Port 80                             â”‚  â”‚
â”‚  â”‚  â”œâ”€ /index.html                                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ /app.jsx                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ /assets/* (images, fonts)                      â”‚  â”‚
â”‚  â”‚  â””â”€ Bundle: React app from build                  â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  Communication: HTTP Requests to Backend           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â†“ (HTTP REST API)                                    â”‚
â”‚        â”‚ URL: http://backend-service:5000/api              â”‚
â”‚        â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         BACKEND PODS (Node.js/Express)              â”‚  â”‚
â”‚  â”‚  Routes & Endpoints:                               â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ GET /api/books                                 â”‚  â”‚
â”‚  â”‚    â””â”€ Fetch all books from database               â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ GET /api/books/:id                             â”‚  â”‚
â”‚  â”‚    â””â”€ Fetch single book by ID                     â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/users/register                       â”‚  â”‚
â”‚  â”‚    â””â”€ Create new user account                     â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/users/login                          â”‚  â”‚
â”‚  â”‚    â””â”€ Authenticate user (JWT token)               â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/orders                               â”‚  â”‚
â”‚  â”‚    â””â”€ Create new order (protected route)          â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ GET /api/admin/stats                           â”‚  â”‚
â”‚  â”‚    â””â”€ Admin dashboard statistics                  â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ GET /api/admin/manage-books                    â”‚  â”‚
â”‚  â”‚    â””â”€ Admin book management interface             â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/admin/add-book                       â”‚  â”‚
â”‚  â”‚    â””â”€ Add new book to inventory                   â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  Port: 5000                                       â”‚  â”‚
â”‚  â”‚  Service Type: ClusterIP (internal only)          â”‚  â”‚
â”‚  â”‚  Database Connection: MongoDB                     â”‚  â”‚
â”‚  â”‚  Auth: JWT tokens in headers                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â†“ (MongoDB Connection String)                        â”‚
â”‚        â”‚ URI: mongodb://user:pass@mongodb-service:27017    â”‚
â”‚        â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         MONGODB STATEFULSET                         â”‚  â”‚
â”‚  â”‚  Database: bookstore                               â”‚  â”‚
â”‚  â”‚  Port: 27017                                        â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  Collections:                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ users                                         â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ Fields: _id, email, password, name, role  â”‚  â”‚
â”‚  â”‚  â”œâ”€ books                                         â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ Fields: _id, title, author, price, cover  â”‚  â”‚
â”‚  â”‚  â”œâ”€ orders                                        â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ Fields: _id, userId, books[], total       â”‚  â”‚
â”‚  â”‚  â”œâ”€ stats                                         â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ Fields: _id, date, revenue, orders_count â”‚  â”‚
â”‚  â”‚  â””â”€ admin_logs                                    â”‚  â”‚
â”‚  â”‚     â””â”€ Fields: _id, action, admin_id, timestamp  â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  Backup Location: Cloud Storage (daily snapshots) â”‚  â”‚
â”‚  â”‚  Replication: Primary (optional: secondary)       â”‚  â”‚
â”‚  â”‚  Access: ClusterIP (internal only)                â”‚  â”‚
â”‚  â”‚  Persistence: PVC - /data/db mount                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  EXTERNAL SERVICES (Optional):                              â”‚
â”‚  â”œâ”€ Firebase Authentication API (HTTPS)                    â”‚
â”‚  â”œâ”€ Email Service (SendGrid/AWS SES)                       â”‚
â”‚  â””â”€ Payment Gateway (Stripe/PayPal)                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **COMPLETE DATA FLOW SUMMARY**

```
1. DEVELOPER PHASE:
   Developer â†’ Write Code â†’ Commit â†’ Push to GitHub

2. TRIGGER PHASE:
   GitHub Webhook â†’ Jenkins Pipeline Triggered

3. BUILD PHASE:
   Jenkins Agent:
   â”œâ”€ Clone Repository
   â”œâ”€ Run Code Quality Checks
   â”œâ”€ Build Frontend (Vite bundle)
   â”œâ”€ Build Backend (Node.js app)
   â”œâ”€ Run Unit Tests
   â””â”€ Generate Build Artifacts

4. CONTAINERIZATION PHASE:
   â”œâ”€ Build Frontend Docker Image (Nginx)
   â”œâ”€ Build Backend Docker Image (Node.js)
   â”œâ”€ Security Scan (Trivy)
   â””â”€ Push to Docker Hub

5. INFRASTRUCTURE PHASE:
   â”œâ”€ Terraform: Provision Cloud Resources (K8s cluster, networking)
   â””â”€ Ansible: Configure Systems (Docker, security, monitoring)

6. DEPLOYMENT PHASE:
   Kubernetes:
   â”œâ”€ Pull Images from Docker Hub
   â”œâ”€ Create ConfigMaps (environment variables)
   â”œâ”€ Create Secrets (credentials)
   â”œâ”€ Deploy Frontend Pods
   â”œâ”€ Deploy Backend Pods
   â”œâ”€ Deploy MongoDB StatefulSet
   â”œâ”€ Configure Ingress & LoadBalancer
   â””â”€ Enable Health Checks & Auto-scaling

7. VALIDATION PHASE:
   â”œâ”€ Health Checks (Frontend, Backend, Database)
   â”œâ”€ API Integration Tests
   â”œâ”€ Smoke Tests
   â””â”€ Generate Test Reports

8. MONITORING PHASE:
   Continuous Monitoring:
   â”œâ”€ Prometheus collects metrics
   â”œâ”€ Grafana visualizes data
   â”œâ”€ Loki aggregates logs
   â””â”€ Alerts on anomalies

9. USER ACCESS PHASE:
   Users â†’ Load Balancer â†’ Frontend Pods
   Frontend â†’ Backend Service (API calls)
   Backend â†’ MongoDB (data queries)
   Responses â†’ Users
```

---

## **Key Connectivity Points**

| Connection                 | Type      | Protocol   | Port   | Authentication    |
| -------------------------- | --------- | ---------- | ------ | ----------------- |
| Developer â†’ Git            | Push      | HTTPS      | 443    | SSH Key/Token     |
| Git â†’ Jenkins              | Webhook   | HTTPS      | 443    | Secret Token      |
| Jenkins â†’ Docker Hub       | Push      | HTTPS      | 443    | Username/Password |
| Jenkins â†’ Terraform        | IaC       | Local      | -      | Cloud API Keys    |
| Jenkins â†’ Kubernetes       | Deploy    | HTTPS      | 6443   | Service Account   |
| Terraform â†’ Cloud Provider | Provision | HTTPS      | 443    | API Keys          |
| Ansible â†’ VMs              | Config    | SSH        | 22     | SSH Key           |
| Frontend â†’ Backend         | API       | HTTP/S     | 80/443 | JWT Token         |
| Backend â†’ MongoDB          | DB Query  | MongoDB    | 27017  | Username/Password |
| External â†’ Ingress         | HTTP/S    | HTTP/HTTPS | 80/443 | TLS Certificate   |
| Ingress â†’ Frontend         | Route     | HTTP       | 80     | Internal          |
| Frontend â†’ Kubernetes      | Deploy    | Local      | -      | Kubectl Config    |

---

## **Security Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Layer 1: Source Control Security                           â”‚
â”‚  â”œâ”€ GitHub branch protection rules                         â”‚
â”‚  â”œâ”€ Code review requirements                               â”‚
â”‚  â””â”€ SSH key management                                     â”‚
â”‚                                                             â”‚
â”‚  Layer 2: CI/CD Security                                    â”‚
â”‚  â”œâ”€ Jenkins credential store                               â”‚
â”‚  â”œâ”€ Secret encryption                                      â”‚
â”‚  â””â”€ Build log masking                                      â”‚
â”‚                                                             â”‚
â”‚  Layer 3: Image Security                                    â”‚
â”‚  â”œâ”€ Container image scanning (Trivy)                       â”‚
â”‚  â”œâ”€ Vulnerability detection                                â”‚
â”‚  â””â”€ Registry authentication                                â”‚
â”‚                                                             â”‚
â”‚  Layer 4: Infrastructure Security                           â”‚
â”‚  â”œâ”€ VPC isolation                                          â”‚
â”‚  â”œâ”€ Security groups/Network policies                       â”‚
â”‚  â”œâ”€ Encryption at rest & in transit                        â”‚
â”‚  â””â”€ Firewall rules                                         â”‚
â”‚                                                             â”‚
â”‚  Layer 5: Application Security                              â”‚
â”‚  â”œâ”€ JWT token authentication                               â”‚
â”‚  â”œâ”€ Role-based access control (RBAC)                       â”‚
â”‚  â”œâ”€ CORS policies                                          â”‚
â”‚  â””â”€ Rate limiting                                          â”‚
â”‚                                                             â”‚
â”‚  Layer 6: Kubernetes Security                               â”‚
â”‚  â”œâ”€ Network policies                                       â”‚
â”‚  â”œâ”€ Pod security policies                                  â”‚
â”‚  â”œâ”€ RBAC for service accounts                              â”‚
â”‚  â””â”€ Secrets management                                     â”‚
â”‚                                                             â”‚
â”‚  Layer 7: Database Security                                 â”‚
â”‚  â”œâ”€ Encrypted connections                                  â”‚
â”‚  â”œâ”€ User authentication                                    â”‚
â”‚  â”œâ”€ Access control (internal only)                         â”‚
â”‚  â””â”€ Regular backups                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **Deployment Environments Summary**

| Environment | Type           | Tools           | Scaling | Replicas | Usage          |
| ----------- | -------------- | --------------- | ------- | -------- | -------------- |
| Development | Docker Compose | Docker          | Manual  | 1        | Development    |
| Staging     | Kubernetes     | kubectl, Helm   | HPA     | 2-3      | Pre-production |
| Production  | Kubernetes     | kubectl, GitOps | HPA     | 2-5      | Live Users     |

---

## **Benefits of This Architecture**

âœ… **Automation**: Fully automated CI/CD pipeline  
âœ… **Scalability**: Auto-scaling pods based on load  
âœ… **Reliability**: Multiple replicas, health checks, self-healing  
âœ… **Security**: Multi-layer security, secrets management  
âœ… **Monitoring**: Real-time metrics, logs, and alerts  
âœ… **Infrastructure as Code**: Reproducible infrastructure  
âœ… **Version Control**: Everything tracked in Git  
âœ… **Disaster Recovery**: Automated backups, easy rollback  
âœ… **Cost Optimization**: Resource limits, efficient scheduling  
âœ… **Compliance**: Audit logs, security scanning, RBAC

---

## **How to Draw in draw.io**

### **Step-by-Step Guide:**

1. **Open draw.io**: https://draw.io or desktop version
2. **Create New Diagram**: File â†’ New â†’ Blank Diagram
3. **Add Shapes**:
   - Use rectangles for servers/services
   - Use circles for processes
   - Use cylinders for databases
   - Use parallelograms for cloud resources

4. **Color Coding**:
   - Blue: Git/Source Control
   - Green: Jenkins/CI
   - Purple: Terraform/IaC
   - Orange: Ansible/Config
   - Cyan: Docker/Containers
   - Navy: Kubernetes
   - Red: Database
   - Gray: External Services

5. **Add Connectors**:
   - Use arrows to show data flow
   - Label arrows with protocols (HTTPS, HTTP, SSH, etc.)
   - Use different arrow styles for different types of connections

6. **Organize Sections**:
   - Use containers/groups to organize related components
   - Add labels for each major section
   - Maintain left-to-right data flow

7. **Add Details**:
   - Include port numbers on connections
   - Add environment variable callouts
   - Include replica counts and resource limits
   - Show network policies and security groups

---

This comprehensive guide provides all the information needed to create a professional CI/CD architecture diagram! ğŸ¨
